{% load static %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>{{ product.name }} — Tech Store</title>
    <link rel="stylesheet" href="{% static 'tech_store/style.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
<header>
    <div class="header-top">
        <span class="techstore-title">Tech Store</span>
    </div>
    <nav class="navbar">
        <a href="{% url 'home' %}" class="nav-item"><i class="fa-solid fa-house"></i> Главная</a>
        <a href="{% url 'catalog' %}" class="nav-item"><i class="fa-solid fa-list"></i> Каталог</a>
        <a href="{% url 'cart' %}" class="nav-item">
            <i class="fa-solid fa-cart-shopping"></i> Корзина
            {% if order %}<span class="cart-count">{{ order.items.count }}</span>{% endif %}
        </a>
        {% if user.is_authenticated %}
            <span class="nav-item"><i class="fa-solid fa-user"></i> {{ user.username }}</span>
            <a href="{% url 'logout' %}" class="nav-item"><i class="fa-solid fa-right-from-bracket"></i> Выйти</a>
        {% else %}
            <a href="{% url 'login-short' %}" class="nav-item"><i class="fa-solid fa-right-to-bracket"></i> Войти</a>
            <a href="{% url 'register-short' %}" class="nav-item"><i class="fa-solid fa-user-plus"></i> Регистрация</a>
        {% endif %}
    </nav>
</header>

<main class="container" style="max-width: 900px; margin: 40px auto;">
    <div class="product-detail" style="display: flex; gap: 30px; background: #fff; border-radius: 10px; padding: 25px; box-shadow: 0 3px 8px rgba(0,0,0,0.1);">
        <div class="product-image" style="flex: 1;">
            {% if product.image %}
                <img src="{{ product.image.url }}" alt="{{ product.name }}" style="width: 100%; border-radius: 10px;">
            {% else %}
                <div class="image-placeholder" style="width: 100%; height: 300px; background: #ccc; border-radius: 10px;"></div>
            {% endif %}
        </div>

        <div class="product-info" style="flex: 1; display: flex; flex-direction: column; justify-content: space-between;">
            <div>
                <h1 style="margin-bottom: 15px;">{{ product.name }}</h1>
                <p style="font-size: 1.1em; color: #555; margin-bottom: 20px;">{{ product.description|default:"Описание отсутствует." }}</p>
                <p style="font-size: 1.3em; font-weight: bold; color: #000;">{{ product.price }} ₸</p>
            </div>

            <form method="post" action="{% url 'add-to-cart' product.id %}">
                {% csrf_token %}
                <button type="submit" class="catalog-btn" style="width: 100%; text-align: center;">Добавить в корзину</button>
            </form>
        </div>
    </div>
</main>
</body>
</html>
